<br>
<app-toasts aria-live="polite" aria-atomic="true"></app-toasts>

<br>
<div class="row">
    <div class="col-3"></div>
    <div class="col-8">
        <div *ngIf="alerta" id="alerta" class="alert alert-success" role="alert">
            <h4 class="alert-heading">Well done!</h4>
            <p>Se ah actualizado el empleado exitosamente.</p>
        </div>
    </div>
    <div class="col-1"></div>
</div>
<br>
<br>
<div class="row">
    <div class="col-3"></div>
    <div class="col-7">
        <form [formGroup]="eForm" (ngSubmit)="updateUser()" novalidate>
            <div class="form-group">
                <label for="exampleInputPassword1">Nombre</label>
                <input type="text" formControlName="name" class="form-control" id="exampleInputPassword1" [ngClass]="{ 'is-invalid': submitted && updateForm.name.errors }"
                    placeholder="Nombre">
                <div *ngIf="updateForm.name.invalid && (updateForm.name.dirty || updateForm.name.touched )" class="alert alert-danger">
                    <div *ngIf="updateForm.name.errors.required">
                        Name is required.
                    </div>
                    <div *ngIf="updateForm.name.errors.minlength">
                        Name tiene que tener 6 letras
                    </div>
                    <div *ngIf="updateForm.name.errors.maxlength">
                        Name tiene que tener menos de 11 letras
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="exampleInputEmail1">Email address</label>
                <input type="email" formControlName="email" class="form-control" id="exampleInputEmail1" [ngClass]="{ 'is-invalid': submitted && updateForm.email.errors }"
                    placeholder="Ej: hola@gmail.com">
                <div *ngIf="updateForm.email.invalid && (updateForm.email.dirty || updateForm.email.touched )" class="alert alert-danger">
                    <div *ngIf="updateForm.email.errors.required">
                        Email is required.
                    </div>
                    <div *ngIf="updateForm.email.errors.email">
                        Email invalid.
                    </div>
                    <div *ngIf="updateForm.email.errors.minlength">
                        Email tiene que tener 6 letras
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="exampleInputPassword1">Phone</label>
                <input type="text" formControlName="phone" class="form-control" id="exampleInputPassword1" [ngClass]="{ 'is-invalid': submitted && updateForm.phone.errors }"
                    placeholder="Phone">
                <div *ngIf="updateForm.phone.invalid && (updateForm.phone.dirty || updateForm.phone.touched )" class="alert alert-danger">
                    <div *ngIf="updateForm.phone.errors?.required">
                        Phone is required.
                    </div>
                    <div *ngIf="updateForm.phone.errors?.minlength">
                        Phone tiene que tener 6 letras
                    </div>
                    <div *ngIf="updateForm.phone.errors?.maxlength">
                        Phone tiene que tener menos de 11 letras
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-6">
                    <label for="exampleInputPassword1">Cargo</label>
                    <select class="custom-select" formControlName="idCargo" [ngClass]="{ 'is-invalid': submitted && updateForm.idCargo.errors }">
                        <option selected disabled value>Seleccionar Cargo</option>
                        <option *ngFor="let cargo of cargos$ | async" [value]="cargo.idCargo">{{cargo.nombre}}</option>
                    </select>
                    <div *ngIf="updateForm.idCargo.invalid && (updateForm.idCargo.dirty || updateForm.idCargo.touched )" class="alert alert-danger">
                        <div *ngIf="updateForm.idCargo.errors?.required">
                            Cargo es requerido.
                        </div>
                    </div>
                </div>
                <div class="form-group col-6">
                    <label for="exampleInputPassword1">Proyecto</label>
                    <select class="custom-select" formControlName="idProyecto" [ngClass]="{ 'is-invalid': submitted && updateForm.idProyecto.errors }">
                        <option selected disabled value>Seleccionar Proyecto</option>
                        <option *ngFor="let proyecto of proyectos$ | async" [value]="proyecto.idProyecto">{{proyecto.nombre}}</option>
                    </select>
                    <div *ngIf="updateForm.idProyecto.invalid && (updateForm.idProyecto.dirty || updateForm.idProyecto.touched )" class="alert alert-danger">
                        <div *ngIf="updateForm.idProyecto.errors?.required">
                            Proyecto es requerido.
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-danger" data-dismiss="modal">Cancelar</button>
                <button type="submit" [disabled]="eForm.invalid" class="btn btn-outline-primary">Editar</button>
            </div>
        </form>
        <p>Form status: {{ eForm.status | json }}</p>
        <br>
        <br>
        <p>Form value: {{ eForm.value | json }}</p>
    </div>
    <div class="col-2"></div>
</div>